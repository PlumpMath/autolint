#!/usr/local/bin/node
require.paths.push(__dirname + '/../lib');

var paths = ["lib/*.js", "test/*.js"];

var linter = require('jslint-linter');
var repository = require('repository').create();
var watchForLint = require('watch-for-lint');
var newFileReporter = require('new-file-reporter');
var lintReporter = require('lint-reporter');

//if (verbose) {
//  newFileReporter.beVerbose();
//}

repository.listenTo(linter);

watchForLint(repository, linter);

newFileReporter.listenTo(repository); // listens to 'newFile' (old concise-reporter)
//summaryReporter.listenTo(repository); // listens to 'change' and 'completeScan'

repository.scan(paths).then(function () {
  //fixReporter.listenTo(repository);   // listens to 'errorsFixed'
  lintReporter.listenTo(repository);  // listens to 'dirty' (old verbose-reporter)
  //growlReporter.listenTo(repository); // listens to 'errorsFixed' and 'errorsIntroduced'
  newFileReporter.beVerbose();
});

//onInterrupt("Scanning for new files.", function () {
//  repository.rescan(paths);
//});
