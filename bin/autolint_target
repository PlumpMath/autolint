#!/usr/local/bin/node
require.paths.push(__dirname + '/../lib');

var paths = ["lib/*.js", "test/*.js"];

var linter = require('jslint-linter');
var repository = require('repository').create();

repository.listenTo(linter);
newFileReporter.listenTo(repository); // listens to 'newFile' (old concise-reporter)
summaryReporter.listenTo(repository); // listens to 'change' and 'completeScan'

repository.scan(paths).then(function () {
  growlReporter.listenTo(repository); // listens to 'errorsFixed' and 'errorsIntroduced'
  fixReporter.listenTo(repository);   // listens to 'errorsFixed'
  lintReporter.listenTo(repository);  // listens to 'dirty' (old verbose-reporter)
});

onInterrupt("Scanning for new files.", function () {
  repository.rescan(paths);
});
